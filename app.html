<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script src="http://fb.me/react-0.10.0.js"></script>
    <script src="http://fb.me/JSXTransformer-0.10.0.js"></script>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
    <script src="/skirmish-web/javascripts/NotificationBox.js" type="text/jsx"></script>

    <script type="text/javascript">
      $(document).ready(function() {
        setTimeout(function() {
          var pusher = new Pusher('013b1cfdc9072c8dbe04');
          var channel = pusher.subscribe('skirmish_channel');
          SkirmishClient.getCurrentPlayerId(SkirmishClient.updatePlayerId);
          React.renderComponent(new NotificationBox({
            messages: SkirmishApp.messageBox.all,
            channel:  channel,
            playerId: SkirmishGameState.getCurrentPlayerId()
          }), document.getElementById("notification-box"))
        }, 1000);

      });
    </script>
</head>


<body>
    <script id="smallest-city-overlay-template" type="text/x-handlebars-template">
        <div class="city-overlay smallest-city-overlay">
          <h4>{{city.name}}</h4>
          <img class = "center" src="{{gravatar}}">
        </div>
    </script>

    <script id="mini-city-overlay-template" type="text/x-handlebars-template">
        <div class="city-overlay mini-city-overlay">
            <h4>{{city.name}}</h4>
            <img class="center" src="{{gravatar}}">
        </div>
    </script>

    <script id="city-overlay-template" type="text/x-handlebars-template">
        <div class="city-overlay big-city-overlay">
            <img class="center" src="{{gravatar}}">
            <div><b>{{city.name}}</b></div>
            <div>Owner: {{playerName}}</div>
            <div>Garrison: {{city.units.length}} unit(s)</div>
        </div>
    </script>
    <div class = "chat-form">

        <form action="/chat" method="post">
          Trash talk: <input id="chat_message" name='chat_message' type="text" size="25" />
          <input id="submit" type="submit" value="send">
        </form>

    </div>
    <div id="message-bar" class="centered-text">Skirmish</div>
    <div id="map-canvas"></div>
    <div id="notification-box"></div>
</body>

<link rel="stylesheet" type="text/css" href="/skirmish-web/stylesheets/mapstylesheet.css"></link>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCN2PiTo4aePWultR2fsm9hOMZNZ5qvwJE"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
<script src="/skirmish-web/javascripts/models/City.js" type="text/javascript"></script>
<script src="/skirmish-web/javascripts/SkirmishGameState.js" type="text/javascript"></script>
<script src="/skirmish-web/javascripts/SkirmishMap.js" type="text/javascript"></script>
<script src="/skirmish-web/javascripts/SkirmishData.js" type="text/javascript"></script>
<script src="/skirmish-web/javascripts/SkirmishClient.js" type="text/javascript"></script>
<script src="/skirmish-web/javascripts/SkirmishDOM.js" type="text/javascript"></script>
<script src="/skirmish-web/javascripts/SkirmishApp.js" type="text/javascript"></script>
<script src="/skirmish-web/javascripts/SkirmishTrigger.js" type="text/javascript"></script>
<script src="/skirmish-web/javascripts/SkirmishTroupMovement.js" type="text/javascript"></script>

<script src="/skirmish-web/javascripts/app.js" type="text/javascript"></script>
<script src="//js.pusher.com/2.2/pusher.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.7.0/moment.js"></script>
